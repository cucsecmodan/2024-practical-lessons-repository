# OM-2.2-Windows桌面安全配置

本章节，一起来了解windows系统的桌面安全配置相关知识，主要从防火墙、使用账户和权限管理、安装杀毒软件这几个方面进行介绍，通过安全配置保护系统免受恶意软件和网络攻击。  

## 一、简介
### 1.1 windows版本简介  

![windows_timeline](.\img\Windowstimeline1.png)  
Windows 操作系统的发展历程可以追溯到 1985 年，自那时起，它经历了许多版本的演变和改进。

* Windows 1.0 - 3.x（1985年 - 1990年代初）：
    * Windows 1.0 是微软发布的第一个图形用户界面操作系统，但并不受欢迎。
    * Windows 2.0 和 Windows 3.x 引入了更多的图形化功能和多任务处理能力，使得 Windows 逐渐成为桌面操作系统的主流选择。

* Windows 95/98/ME（1990年代中期 - 2000年）：
    * Windows 95 是一次重大的突破，引入了开始菜单、任务栏等界面元素，成为了当时最受欢迎的操作系统之一。
    * Windows 98 和 Windows ME（Millennium Edition）延续了 Windows 95 的风格，但增加了更多功能和改进。

* Windows NT/2000（1990年代末 - 2000年代初）：
    * Windows NT 是专为商业环境设计的操作系统，具有更强的稳定性和安全性，但在桌面市场上并不流行。
    * Windows 2000 将 Windows NT 和 Windows 98/ME 的特性结合在一起，成为既适用于商业用户又适用于个人用户的操作系统。

* Windows XP（2001年）：
    * Windows XP 是一次重大的里程碑，它融合了 Windows NT/2000 的稳定性和安全性，以及 Windows 98/ME 的用户友好性，成为了当时最受欢迎的桌面操作系统。

* Windows Vista（2007年）：
    * Windows Vista 引入了许多新功能和改进，但也面临着性能和兼容性问题，因此受到了批评，用户接受度较低。

* Windows 7（2009年）：
    * Windows 7 是一次成功的回归，修复了 Vista 中的许多问题，并引入了更多的改进和新功能，成为了一个广受好评的操作系统。

* Windows 8/8.1（2012年）：
    * Windows 8 引入了全新的“现代界面”，适用于触摸屏设备，但它也在传统桌面用户中引起了争议。Windows 8.1 做了一些改进，但并没有完全解决所有问题。

* Windows 10（2015年）：
    * Windows 10 是微软的市场份额占比最大的操作系统，它将传统的桌面体验与现代的应用程序模型结合在一起，提供了更好的安全性、性能和功能，以及持续的更新和改进。

* Windows 11（2021年）：
    * Windows 11 引入了一系列改进，包括用户界面设计，采用重新设计的任务栏、居中对齐的开始菜单等，在性能和稳定性方面有所改进，新的系统架构和更新的内核使得系统更加响应迅速，同时也提升了电池寿命，引入了一系列新的安全功能，包括内置的虚拟化技术、安全启动、硬件支持的身份验证等，提供了更好的系统安全性和保护用户隐私。

下图可以清晰地看到各个版本的市场份额占比，关于历代版本的更具体的介绍可参考文章：[回首Windows的35年发展史，你觉得哪个版本最经典](https://www.cnblogs.com/xiykj/p/13182713.html)。  

![windows_percentage](./img/windows_percentage.jpg)  

<!-- 以下内容更适合放在加固实验part -->
<!-- ### 1.2 Windows 操作系统安全加固简介  

安全加固的重要意义：安全加固和优化是实现信息系统安全的关键环节。通过安全加固，将在信息系统的网络层、主机层、软件层、应用层等层次建立符合安全需求的安全状态，并以此作为保证客户信息系统安全的起点。安全加固是配置软件系统的过程，针对服务器操作系统、数据库及应用中间件等软件系统，通过打补丁、强化帐号安全、加固服务、修改安全配置、优化访问控制策 略、增加安全机制等方法，堵塞漏洞及“后门”，合理进行安全性加强，提高其健壮性和安全性，增加攻击者入侵的难度，提升系统安全防范水平。

简介参考文章：  

[Windows 操作系统安全性](https://learn.microsoft.com/zh-cn/windows/security/operating-system-security/)  
[windows系统加固](https://developer.aliyun.com/article/1159907)   -->

## 二、防火墙简介

目的：了解防火墙的功能、防火墙的工作原理、windows防火墙的使用配置。  

### 2.1 防火墙的功能
场景复现：装了个输入法，广告太多，想通过配置禁止这个软件联网；在机房上机时，怎样配置可以不被老师控制屏幕；下载软件时，下载和安装到一半突然被自动截停了......而这些需求都在防火墙的掌控之下。防火墙本身狭义上讲负责控制入出规则，同时还有基于tcp，udp的筛选，端口的筛选，域的筛选等等。可以阻隔一些来自外部的，甚至是一些内部的攻击。
根据网络的安全信任程度和需要保护的对象，人为地将企业网络划分若干安全区域，常见的安全区域有：  
* 内网（intranet），内网又称局域网，是防火墙的重点保护区域，包含单位网络内部的所有网络设备和主机。该区域是可信的，内网发出的连接较少进行过滤和审计。  
* 外网（Extranet），又称广域网、公网，是内网的扩展延伸，常用作组织与合作伙伴之间进行通信。  
* DMZ区（Demilitarized Zone）又称军事缓冲区，DMZ是一个逻辑区。从内网中划分出来（介于内部网络和外部网络之间的网络段），常放置公共服务设备，向外提供信息服务。  

[firewall](./img/firewall_structure.png)   

外网(Internet)，是防火墙重点防范的对象，针对单位外部访问用户、服务器和终端。外网发起的通信必须按照防火墙设定的规则进行过滤和审计，不符合条件的则不允许访问。在安全区域划分的基础上，通过一种网络安全设备，控制安全区域间的通信，可以隔离有害通信，进而阻断网路攻击。这种安全设备就叫做防火墙，一般安装在不同安全区域的边界，用于控制网络通信安全。曾经看到一个非常形象的比喻，可以理解为内网里的主机是一座城池，而防火墙是这个城池的城门。因特网上的病毒木马什么的就相当于敌对势力派来的间谍，想混进城去，防火墙就相当于城门口的关卡用来盘查筛选，放合适的人进城。一个包过来了。防火墙：到哪去啊。包：去8080端口。防火墙：不行，上头说了要去8080端口的都不让进城。然后这个包就被拦住了。又一个包过来了。防火墙：打哪来啊？包：从 `http://XXX.XXX.XXX.XXX` 来。防火墙：不行，`http://XXX.XXX.XXX.XXX` 来的都不让过。关掉防火墙就相当于把城门的关卡拆掉，直接把城内的东西暴露出来。  

防火墙的功能主要有以下几个方面：
* 过滤非安全网络访问。将防火墙设置为只有预先被允许的服务和用户才能通过防火墙，禁止未授权的用户访问受保护的网络，降低被保护网络受非法攻击的风险。
* 限制网络访问。防火墙只允许外部网络访问受保护网络的制定主机或网络服务，通常受保护网络中的Mail、FTP、WWW服务器等可让外部访问，而其他类型的访问则予以禁止。防火墙也可以用来限制受保护网络中的主机访问外部网络的某些服务，例如某些不良网站。
* 网络访问审计。防火墙是外部网络与受保护网络之间的唯一网络通道，可以记录所有通过它的访问，并提供网络使用情况的统计数据。
* 网络带宽控制。防火墙可以控制网络带宽的分配使用，实现部分网络质量服务（QoS）保障。
* 协同防御。防火墙和入侵检测系统通过交换信息实现联动，根据网络的实际情况配置并修改安全策略，增强网络安全。


### 2.2 防火墙的工作原理
防火墙是由一些软、硬件组合而成的网络访问控制器，他根据一定的安全规则来控制流过防火墙的网络包，如禁止或转发，能够屏蔽被保护网络内部的信息、拓扑结构和运行状况，从而起到网络安全屏障的作用。防火墙一般用来将内部网络与因特网或者其它外部网络相互隔离，限制网络互访，保护内部网络的安全。  

[firewall_router_structure](./img/firewall_structure2.jpg)  

#### 2.2.1 防火墙类型与实现技术  
防火墙的实现技术主要有包过滤、状态检测、应用服务代理、网络地址转换、协议分析、深度包检查等。本节主要介绍防火墙普遍采用的包过滤技术、状态检测技术和代理服务技术。 

##### 2.2.1.1 包过滤技术
包过滤是在IP层实现的防火墙技术，包过滤根据包的源IP地址、目的IP地址、源端口、目的端口及包传递方向等包头信息判断是否允许包通过。此外，还有一种可以分析包中的数据区内容的只能包过滤器。基于包过滤技术的防火墙，简称为包过滤型防火墙（Packet Filter）

  包过滤式防火墙的基本功能之一。多数现代的IP路由软件或设备都支持包过滤功能，并默认转发所有的包。包过滤的控制依据是规则集，典型的过滤规则表示格式由“规则号、匹配条件、匹配操作”三部分组成，一般的包过滤防火墙都用源IP地址、目的IP地址、源端口号、目的端口号、协议类型（UDP、TCP、ICMP）、通信方向、规则运算符来描述过滤规则条件。而匹配操作有拒绝、转发、审计三种。
 Cisco IOS有两种访问规则形式，即标准IP访问表和扩展IP访问表，他们的区别主要是访问控制条件不一样。标准IP访问表只是根据IP包的源地址进行，扩展IP访问表同时匹配源地址和目的地址，标准IP访问表只是包过滤成为当前解决网络安全问题的重要技术之一，不仅可以用在网络边界，而且也可以用在单台主机上。如下图是windows11 配置包过滤的地方。
在这里插入图片描述
包过滤防火墙技术的优点：低负载、高通过率、对用户透明

包过滤技术的弱点：不能在用户级别进行过滤，如不能识别不同的用户和防止IP地址盗用。如果攻击者把自己主机的IP地址设置成一个合法主机的IP地址，就可以轻易通过包过滤器。
##### 2.2.1.2 状态检测技术

 基于状态的防火墙通过用TCP会话和UDP“伪”会话的状态信息进行网络访问机制。采用状态检查技术的防火墙首先建立并维护一张会话表，当有符合已定义安全策略的TCP连接或UDP流时，防火墙会创建会话项，然后依据状态表项检查，与这些会话相关联的包才允许通过防火墙。



  状态防火墙处理包流程的主要步骤如下

（1）接收到数据包

（2）检查数据包的有效性，若无效，则丢掉数据包并审计

（3）查找会话表；若找到，则进一步检查数据包的序列号和会话状态，如有效，则进行地址转换和路由，转发该数据包；否则，丢掉数据包并审计

（4）当会话表中没有新到的数据包信息时，则查找策略表，如符合策略表，则增加会话条目到会话表中，并进行地址转换和路由，转发该数据包；否则，丢掉该数据包并审计。


##### 2.2.1.3 应用服务代理技术

应用服务代理防火墙扮演着受保护网络的内部网络主机和外部网络主机的网络通信连接“中间人”角色，代理防火墙代替受保护网络的主机向外部网络发送服务请求，并将外部服务请求响应的结果返回给受保护网络主机



  采用代理服务技术的防火墙简称为代理服务器，它能提供应用级的网络安全访问控制。代理服务器按照所代理的服务可分为FTP代理、Telnet代理、Http代理、Socket代理、邮件代理等。如下是windows11设置代理服务器的方式



  代理服务技术也是常用的防火墙技术，安全管理员为了对内部网络用户进行应用级上的访问控制，常安装代理服务器。受保护的内部用户对外部网络访问时，首先要通过代理服务器的认可，才能向外提出请求，而外网的用户只能看到代理服务器，从而隐藏了受保护网络的内部结构及用户的计算机信息。因而，代理服务器可以提高网络系统的安全性。

代理服务器的优点：

不允许外部主机直接访问内部主机
支持多种用户认证方案
可以分析数据包内部的应用命令
可以提供详细的审计记录
  
应用服务代理技术的缺点是

速度比包过滤慢
对用户不透明
与特定应用协议相关联，代理服务器并不能支持所有的网络协议


### 2.3 windows防火墙的部署和应用

#### 2.3.1 windows防火墙简介 

Windows 防火墙是基于主机的防火墙，它包含在操作系统中，在所有 Windows 版本上默认启用。Windows 防火墙支持 Internet 协议安全性 (IPsec) ，可以使用它从任何尝试与你的设备通信的设备进行身份验证。 需要身份验证时，无法作为 `受信任设备进行身份验证的设备` 无法与你的设备通信。 可以使用 IPsec 要求对某些网络流量进行加密，以防止恶意用户可能附加到网络的网络数据包分析器读取该流量，Windows 防火墙还适用于 `网络位置感知 ` ，以便它可以应用适合设备所连接到的网络类型的安全设置。 例如，当设备连接到咖啡店 `Wi-fi` 时，Windows 防火墙可以应用 `公用` 网络配置文件，当设备连接到家庭网络时，可以应用 `专用` 网络配置文件。 这使你可以对公用网络应用更严格的设置，以帮助确保设备安全。  

[firewall](./img/firewall.jpg)  

#### 2.3.2 windows防火墙规则  
适用于：✅ Windows 11, ✅ Windows 10, ✅ Windows Server 2022, ✅ Windows Server 2019, ✅ Windows Server 2016  
`防火墙规则` 标识允许或阻止的网络流量，以及发生这种情况的条件。 这些规则提供了广泛的条件选择来标识流量，包括：  
* 应用程序、服务或程序名称
* 源和目标 IP 地址
* 可以使用动态值，例如默认网关、DHCP 服务器、DNS 服务器和本地子网
* 协议名称或类型。 对于传输层协议 TCP 和 UDP，可以指定端口或端口范围。 对于自定义协议，可以使用表示 IP 协议的 0 到 255 之间的数字
* 接口类型
* ICMP/ICMPv6 流量类型和代码

#### 2.3.3 windows防火墙配置文件  
Windows 防火墙提供三个网络配置文件：域、专用和公用。网络配置文件用于分配规则。 例如，可以允许特定应用程序在专用网络上进行通信，但不允许在公用网络上进行通信。  
* 域网络：   
域网络配置文件在检测到域控制器的可用性时，会自动应用于已加入 `Active Directory` 域的设备，无法手动设置此网络配置文件。  

* 专用网络：  
专用网络配置文件专为专用网络（如家庭网络）设计。管理员可以在网络接口上手动设置它。  

* 公共网络：  
公共网络配置文件在设计时考虑了公共网络（如 Wi-Fi 热点、咖啡店、机场、酒店等）的安全性。它是身份不明网络的默认配置文件。  

### 2.4 windows防火墙配置实操，以MS17-010为例  
* 漏洞简介：
永恒之蓝漏洞通过 TCP 的445和139端口，来利用 SMBv1 和 NBT 中的远程代码执行漏洞，通过恶意代码扫描并攻击开放445文件共享端口的 Windows 主机。只要用户主机开机联网，即可通过该漏洞控制用户的主机。不法分子就能在其电脑或服务器中植入勒索病毒、窃取用户隐私、远程控制木马等恶意程序。445端口是TCP共享服务 445端口它将尝试同时连接到端口139和445。如果端口445有响应，它将向端口139发送TCPRST数据包，以断开并继续与端口455的通信；当端口445没有响应时，使用端口139。139 NetBIOS File and Print Sharing 通过这个端口进入的连接试图获得NetBIOS/SMB服务。这个协议被用于Windows"文件和打印机共享"和SAMBA。在Internet上共享自己的硬盘可能是最常见的问题。139属于TCP协议。  

* 受影响的版本：
目前已知受影响的 Windows 版本包括但不限于：WindowsNT，Windows2000、Windows XP、Windows 2003、Windows Vista、Windows 7、Windows 8，Windows 2008、Windows 2008 R2、Windows Server 2012 SP0  

#### 实验过程

##### 环境搭建

* 受害机：Windows7  
* 攻击机：Kali  
* 工具：namap、metasploit(msf)  
Metasploit Framework(MSF)是一款开源安全漏洞检测工具，附带数千个已知的软件漏洞，并保持持续更新。Metasploit可以用来信息收集、漏洞探测、漏洞利用等渗透测试的全流程，被安全社区冠以“可以黑掉整个宇宙”之名。刚开始的Metasploit是采用Perl语言编写的，但是再后来的新版中，改成了用Ruby语言编写的了。在kali中，自带了Metasploit工具。

##### 复现过程


### 2.3 防火墙常见厂商  
1.Juniper/NetScreen
NetScreen由三位留美的清华学子创建，其防火墙和VPN产品无论从性能指标还是质量上都位居世界前列。其防火墙产品的具体功能特性为：拥有专用的操作系统ScreenOS、拥有专门优化的硬件增强技术、集成VPN、灵活的流量管理、基于ASIC的访问策略的执行、管理简单快捷。

2.Cisco
非常有名的网络公司，其安全产品特性如下：
* 可在单一设备中集成丰富的安全服务。  
* 使用专用的安全操作系统，消除了各种安全风险，提高可靠性。  
* 安全功能强大，可综合利用各种先进技术。  
* 支持IKE和IPSec VPN标准。  
* 融合了入侵检测的功能。还可与思科网络入侵解决方案相集成，构成统一的网络防护体系。  
提供动态或者静态的网络地址解析（NAT）和端口地址解析（PAT）功能。用户可灵活地实现联网功能而且与PPPoE(PPP Over Ethernet)网络兼容。管理方便、快捷，手段灵活。提供了较强的可管理性和可审计性。  

3.CheckPoint
CheckPoint公司是全球首屈一指的互联网安全解决方案供应商，是Internet安全领域的全球领先企业，在全球VPN及防火墙市场上居于领导地位。CheckPoint公司防火墙产品具有如下特性：  
* 状态检测技术。  
* OPSEC（Open Platform for Secure Enterprise Connectivity）。  
* 增强的身份认证（包括用户认证、客户认证和会话认证三种方法）。  
* 加密。  
* 内容安全。  

4.Fortinet
Fortinet是新一代网络实时安全防御网关的技术引领者。首家推出基于ASIC硬件体系结构的FortiGate防火墙。该系列产品已获得国际计算机安全协会实验室的防病毒、IPSec、NIDS和防火墙四项认证证书，是全球唯一同时拥有这四项证书的厂家。FortiGate系列防火墙产品的功能特性如下：  
* 病毒检测与蠕虫防御。  
* 状态检测。  
* 实现了实时的、基于网络的IDS/阻断。  
* 虚拟专用网（VPN）。  
* 支持内容过滤。  
* 提供了多种管理配置手段。  
* 具有较强大的日志记录与分析功能。  

5.WatchGuard
WatchGuard公司是全球排名前五位的专业生产防火墙的公司之一。WatchGuard公司以生产即插即用Internet安全设备“Firebox”系列和相应的服务器安全软件而闻名于世。WatchGuard在全球首创了专用安全系统；首家将应用层安全结合到防火墙系统中；首创了可全面升级的整合安全网关；首创可全面升级的统一威胁管理（UTM）产品。

6.安氏

安氏是一家以技术著称的专业信息安全公司，它成功开发了全新一代安全管理解决方案——安全运行中心（Security Operation Center, 简称SOC）。安氏公司在电信、金融等行业率先推出了整体信息安全管理方案，其主要产品是“领信”系列安全产品。

7.天融信

天融信公司于1996年推出了中国第一套自主版权的防火墙产品，具有填补国内空白的重要意义。随后几年又推出了VPN、IDS、过滤网关、安全审计、安全管理等一系列安全相关产品。2001年组织并构建了TOPSEC联动协议安全标准，提出了一套集各类安全产品和集中管理、集中审计为一体的TOPSEC安全解决方案。又于2004年底率先提出“可信网络架构（TNA）”，强化可信安全管理在安全建设中的核心地位，通过全局安全管理，实现多层次的积极防御和综合防范。天融信公司的银河防火墙（NGFW4000-UF TG-5736）是国内首款具备万兆网络接入能力的防火墙产品。网络卫士猎豹系列防火墙则采用了真正拥有的具有国产知识产权的新一代可编程安全芯片。

8.东欧

东软是中国领先的软件与解决方案提供商。东软的NetEye防火墙(FW)产品采用独创的基于状态包过滤的“流过滤”体系结构，保证了从数据链路层到应用层的完全高性能过滤，并可以进行应用级插件的及时升级和安全威胁的有效防护，实现网络安全的动态保障NetEye防火墙采用NP架构，运行于NetEye安全操作系统之上，具有高吞吐量、低延迟、零丢包率和强大的缓冲能力。同时NetEye防火墙集成VPN功能，简单及人性化的虚拟通道设置，有效提高了VPN的部署灵活性、可扩展性，降低了部署维护的成本。


9.启明星辰

采用高性能X86硬件架构 一体化网关技术
1996年成立的启明星辰，承担国家级重点项目企业，拥有国家级网络安全技术研发基地。2003年，成为国内仅有的两家可以查看微软Windows操作系统源代码厂商之一。截至2007年，启明星辰共发布了59个windows、linux、unix操作系统的安全漏洞，居亚洲首位，用户遍及32个省、市。网络安全产品共有七大系列，其中推出新一代的UTM产品——天清汉马USG一体化安全网关。采用高性能的硬件架构和一体化的软件设计，集防火墙、×××、***防御(IPS)、防病毒、外联控制、抗拒绝服务***(Anti-DoS)、内容过滤、反垃圾邮件、NetFlow等多种安全技术于一身。目前，产品涉及从大型企业、电信级千兆骨干网到小型分支机构的百兆型网络的USG10个产品。


10.联想网御

Power V 产品系列多 万兆级网关—KingGuard
联想网御1999年进入信息安全行业，拥有众多的核心技术、专利50项，涵盖全系列防火墙、×××、UTM、IDS、IPS、防病毒网关、安全隔离网闸、安全管理共计8个大类，350多款产品，并参与和制定了多项国家安全等级保护制度。2007年，率先推出“下一代安全架构”的技术。并在08年一举收购了艾克斯通公司(SSL ×××专业厂商)，还是国内较早发布了万兆安全网关产品以及万兆的UTM解决方案的厂商。联想网御防火墙分为三大系列：Spuer V、Power V、Smart V，共计40多款。拥有创新的VSP、USE、MRP等安全关键技术，其产品在众多领域已经部署了4万台以上，市场占有率名列前茅。今年6月，联想网御发布了万兆级安全网关产品——金刚安全网关KingGuard。该款产品成为迄今为止业界处理性能最高的万兆安全网关产品，它首创在信息安全产品中应用矩阵式并行计算系统——Windrunner。 


11.华为

技术为主，质量有保障。华为业务领域涉猎众多，在网络安全方面，Eudemon 防火墙系列产品基于电信级的硬件平台以及专用VRP软件平台，在***防范、×××、NAT以及P2P应用监控等方面都有卓越的表现。基于网络处理器NP的高速防火墙Eudemon 300/500/1000和专业的硬件平台以及VRP软件平台的Eudemon 100E/200/200S。值得一提的是，华为的Eudemon 防火墙无故障间隔时间为37年。


## 三、权限管理简介
目的：本节介绍 Windows 中的访问控制，即授权用户、组和计算机访问网络或计算机上的对象的过程。  

### 3.1 用户与组介绍  
Windows的用户帐户是对计算机用户身份的识别，且本地用户帐户和密码信息是存储在本地计算机上的（即由：安全账户管理器【Security Accounts Manager】负责SAM（Security Accounts Manager）数据库的控制和维护；SAM数据库则是位于注册表的【计算机\HKEY_LOCAL_MACHINE\SAM\SAM】下，受到ACL保护），SAM文件在【C:\Windows\System32\config】路径下。SAM对应的进程：lsass.exe （Local Security Authority Process）。通过本地用户和组，可以为用户和组分配权利和权限，从而限制用户和组执行某些操作的能力。 不同的用户身份拥有不同的权限，每个用户包含一个名称和一个密码，用户帐户拥有唯一的安全标识符(Security Identifier，SID)。如果我们去进程管理里面杀死 lsass.exe 进程时，windows会提示遇到错误，然后关机。
组账户是一些用户的集合；且组内的用户自动拥有组所设置的权限。  
* 组账户是用户账户的集合，用于组织用户账户；  
* 为一个组授予权限后，则该组内的所有成员用户自动获得改组的权限；  
* 一个用户账户可以隶属于多个组，而这个用户的权限就是所有组的权限的合并集。  
### 3.2 用户账户与组账户  
#### 3.2.1 用户账户
用户账户分为两种类型：【本地用户账号】和【全局用户账号(也叫：域用户账号)】  

* 本地用户账号是创建于本地计算机（它的作用范围：仅仅限于创建它的计算机，控制用户对本地计算机上的资源访问）。  

* 全局用户账号创建于域服务器，可以在网络中的任意计算机上加入域后使用，使用范围是整个域网络。 
Windows的默认用户账户用于特殊用途，一般不用更修改其权限。

Windows的默认用户账户：  
|  默认用户账户   |  含义  | 说明 |
|  :----  | :----  | :---- |
| Administrator  | 	管理员用户 | 管理计算机(域)的内置帐户（默认禁用） |
| DefaultAccount  | 默认账户 | 系统管理的用户帐户（默认禁用） |
| defaultuser0  | 默认用户 | （默认禁用） |
| Guest  | 来宾用户 | 提供给访客人员使用（默认禁用） |
| WDAGUtilityAccount  | Windows Defender用户 | 系统为 Windows Defender 应用程序防护方案管理和使用的用户帐户（默认禁用） |

拥有的权限大小：System > Administrator > Uaer > Guest  

#### 3.2.2 用户账户的查看、创建和提升权限

|  序号   |  命令 | 命令说明 |
|  :----  | :----  | :---- |
| 1  | 	net user | 查看系统账户 |
| 2  | net user Cm0001 123456 /add | 创建用户是：Cm0001 密码是：123456的账户  |
| 3  | net user Cm0001 987654 | 	修改用户Cm0001的密码为987654 |
| 4  | net user Cm0001 | 查看用户Cm0001的属性 |
| 5  | net  localgroup   administrators Cm0001 /add | 提升用户Cm0001的权限为管理员 |
| 6  | 	net user Cm0001 123456 /del | 删除用户Cm0001 |

#### 3.2.3 组账户
windows内置的组账户： 

|  内置的组账户名称   |  含义 | 说明 |
|  :----  | :----  | :---- |
| Administrators | 	管理员组 | 默认情况下Administrator中的用户对计算机 / 域有不受限制的完全访问权，功能有：1.管理文件：Windows系统中，系统磁盘中的文件只能由Administrators组的账户进行更改； 2.更改系统安全设置：安装新的功能、更改计算机网络设置、对服务器选项进行设置，这些操作都需要Administraotors组中的用户进行操作。如果用户的权限不够，选择管理员用户进行操作。默认情况下，Adminiistrator账户处于禁用状态 当它处于请用状态时，Administrator账户具有对计算机的完全控制权限，并根据需要向用户分配权力和访问控制权限，该账户必须仅用于需要管理凭据任务 强烈建议Administrator设置为强密码 永远不可以从管理员组删除Adminsitrator账户，但是可以重命名或禁用该账户 |
| Guests | 来宾用户组 | 提供给没有用户帐户但是需要访问本地计算机内资源的用户使用，该组的成员无法永久地改变其桌面的工作环境。该组最常见的默认成员为用户帐号Guest。1.通常这个账户没有修改系统设置和进行安装程序的权限；2.也没有创建修改任何文档的权限，只能读取计算机系统信息和文件 在windows系统中，Guest账户被任务是不安全的权限账户。3.默认情况下禁用Guest用户。而且此账户默认为Guests组成员，改组允许用户登陆计算机，其他权力及任何权限都必须由管理员组中的用户成员给与Guests组  |
| Power Users  | 功能用户组 | 	组内的用户具备比Users组更多的权利，但是比Administrators组拥有的权利更少一些，例如，可以：创建、删除、更改本地用户帐户；创建、删除、管理本地计算机内的共享文件夹与共享打印机；自定义系统设置，例如更改计算机时间、关闭计算机等。1.不可以更改Administrators；2.无法夺取文件的所有权；3.无法备份与还原文件；4.无法安装删除与删除设备驱动程序；5.无法管理安全与审核日志。 |
| Users  | 标准用户组 | Users组账户权限低于Adiministraotrs组的账户，但高于Guests组账户。1.Users组用户可以进入“网络和共享中心”，并查看网络连接状态，但无法修改连接属性；2.Users组用户也无法关闭防火墙；3.Users组用户无法安装软件；4.Users组用户也无法对该用户文件夹以为的C盘进行修改。 |
| Remote Desktop Users  | 远程桌面用户组 | 组内的成员拥有远程桌面登录的权限；默认Administrators组内的成员都拥有远程桌面的权限 。Remote Desktop Users组的作用就是保障远程桌面服务的安全运行，一旦赋予Administrator组远程桌面的权限，就像是为入侵者省略了提权的步骤。相对于改变用户组权限，将需要连接远程桌面的用户分到Remote Desktop Users组中是一中更加安全的方式 |  

#### 3.2.4 组的查看、创建和删除  

|  序号   |  组命令 | 说明 |
|  :----  | :----  | :---- |
| 1  | 	net localgroup testgroup /add | 新建一个testgroup的组 |
| 2  | net user Cm0001 123456 /add | 创建用户是：Cm0001 密码是：123456的账户  |
| 3  | net localgroup testgroup Cm0001 /add | 		将用户Cm0001加入testgroup组中 |
| 4  | net localgroup testgroup | 查看testgroup组内的成员 |
| 5  | net localgroup testgroup Cm0001 /del | 将用户Cm0001从testgroup组中移除 |
| 6  | 	net localgroup testgroup /del | 删除testgroup组 |
| 7  | net localgroup "remote desktop users" hack /add | 将用户hack加入remote desktop users组中 |
| 8  | net localgroup "remote desktop users" | 查看remote desktop users组内的成员 |
| 9  | 	net localgroup "remote desktop users" hack /del | 将用户hack从remote desktop users组中移除
 |

### 3.3 访问控制  

Windows的访问控制列表(Access Control List)：访问权限决定着某个用户可以访问的文件和目录 对于每一个文件和文件夹，由安全描述符(SD)规定了安全数据、安全描述符决定安全设置是否对当前目录有效，或者它可以被传递给其他文件和目录。当一个用户试图访问一个文件或者文件夹的时候，NTFS 文件系统会检查用户使用的帐户或者账户所属的组是否在此文件或文件夹的访问控制列表（ACL）中。如果存在，则进一步检查访问控制项 ACE，然后根据控制项中的权限来判断用户最终的权限。  
windows的访问控制：  

|  访问控制名称   |  含义 | 说明 |
|  :----  | :----  | :---- |
| Access Control List  | 	访问控制列表(ACL) | 访问权限决定着某个用户可以访问的文件和目录 对于每一个文件和文件夹，由安全描述符(SD)规定了安全数据 安全描述符决定安全设置是否对当前目录有效，或者它可以被传递给其他文件和目录 |
| Access Control environment  | 访问控制环境（ACE） | 访问控制项ACE，是指访问控制实体，用于指定特定用户/组的访问权限，是权限控制的最小单位。1.完全控制：对文件或者文件夹可执行所有操作；2.修改：可以修改、删除文件或文件夹；3.读取和执行：可以读取内容，并且可以执行应用程序；4.列出文件夹目录：可以列出文件夹内容，此权限只针对文件夹存在，文件无此权限；5.读取：可以读取文件或者文件夹的内容；6.写入：可以创建文件或者文件夹；7.特别的权限：其他不常用的权限，比如删除权限的权限；  |
| New Technology File System  | 文件系统（NTFS） | 		文件夹的NTFS权限 (文件夹内的文件或文件夹会默认继承上一级目录的权限)。1.完全控制：对文件或者文件夹可执行所有操作2.修改：可以修改、删除文件或文件夹3.读取和执行：可以读取内容，并且可以执行应用程序4.读取：可以读取文件的内容5.写入：可以修改文件的内容6.特殊权限：其他不常用的权限，比如删除权限的权限。 |
| Security Identifiers | 安全标识符（SID） | SID的说明：安全标识符是标识用户、组和计算机帐户的唯一的号码。在第一次创建该帐户时，将给网络上的每一个帐户发布一个唯一的 SID。Windows 2000 中的内部进程将引用帐户的 SID 而不是帐户的用户或组名。如果创建帐户，再删除帐户，然后使用相同的用户名创建另一个帐户，则新帐户将不具有授权给前一个帐户的权力或权限，原因是该帐户具有不同的 SID 号。安全标识符也被称为安全 ID 或 SID。SID的作用：用户通过验证后，登陆进程会给用户一个访问令牌，该令牌相当于用户访问系统资源的票证，当用户试图访问系统资源时，将访问令牌提供给 Windows NT，然后 Windows NT 检查用户试图访问对象上的访问控制列表。如果用户被允许访问该对象，Windows NT将会分配给用户适当的访问权限。 访问令牌是用户在通过验证的时候有登陆进程所提供的，所以改变用户的权限需要注销后重新登陆，重新获取访问令牌。 |

### 3.4 用户账户控制（UAC）
用户帐户控制（User Account Control，简称：UAC）是微软公司在其Windows Vista及更高版本操作系统中采用的一种控制机制。原理是：通知用户是否对应用程序使用硬盘驱动器和系统文件授权，以达到帮助阻止恶意程序（有时也称为“恶意软件”）损坏系统的效果。 UAC要求用户在执行可能影响计算机运行的操作或执行更改影响其他用户的设置的操作之前，提供一个确认的对话框窗口，使用户可以在执行之前对其进行验证，UAC可以帮助防止恶意软件和间谍软件在未经许可的情况下在计算机上进行安装或对计算机进行更改。  

## 四、杀毒软件简介
目的：了解杀毒软件的运行原理，了解windows内置杀毒软件windows defender，了解市场上的杀毒软件。
### 4.1 杀毒软件的重要性
杀毒软件在当前计算机安全中具有不可替代的重要性，它能够保护计算机系统免受恶意软件和网络攻击的侵害，提升系统的安全性和稳定性，保护用户的个人隐私和数据安全。安装并定期更新杀毒软件是维护计算机安全的必要措施之一：

* 恶意软件防护：杀毒软件可以检测、识别和清除计算机系统中的各种恶意软件，包括病毒、蠕虫、木马、间谍软件等。这些恶意软件可能会破坏系统功能、窃取个人信息、监视用户活动等，因此及时发现并清除这些威胁是非常重要的。  

* 实时保护：许多杀毒软件提供实时保护功能，能够在用户使用计算机时不断监视系统，及时阻止和清除新出现的恶意软件威胁。这种实时保护有助于防止恶意软件对系统造成损害。  

* 安全漏洞修补：一些杀毒软件不仅能够检测和清除已知的恶意软件，还能够识别和修补系统中的安全漏洞。这些安全漏洞可能是恶意软件利用的入口，通过修补这些漏洞可以增强系统的安全性。  

* 保护个人隐私：杀毒软件可以防止间谍软件和广告软件等恶意软件收集用户的个人信息和浏览习惯，保护用户的隐私安全。  

* 网络安全：一些杀毒软件还具有网络安全功能，能够检测和阻止恶意网站、钓鱼网站和网络攻击，从而保护用户免受网络威胁的侵害。  

### 4.2 Windows Defender简介

在数字时代，计算机安全变得尤为重要。对于 Windows 用户而言，`Windows Defender` 是一款windows内置的免费杀毒软件，现在的名字是Windows安全中心，其实它就是大家熟悉的 `Windows Defender` 。旨在提供实时保护、防御恶意软件和保障系统安全。它提供实时保护，可以监测和阻止潜在的恶意软件、病毒、间谍软件和其他威胁。`Windows Defender` 的病毒定义数据库经常更新，以确保及时识别和处理新出现的威胁。  

`Windows Defender` 的功能如下：  

* 实时保护：`Windows Defender` 的核心功能是提供实时保护，即时检测并阻止恶意软件的执行。

* 完整系统扫描：用户可以随时进行全盘扫描，确保系统中没有潜在的威胁。

* 自定义扫描：除了全盘扫描外，`Windows Defender` 还支持用户自定义扫描，可选择特定文件夹或文件进行检查。

* 防火墙和网络保护：`Windows Defender` 还包含防火墙和网络保护功能，加强对网络攻击和潜在威胁的防范。

* 性能和健康报告：用户可以查看性能和健康报告，了解系统的安全状态，以及 `Windows Defender` 对潜在威胁的处理情况。 

### 打开或者关闭windows defender  
默认情况下， `Windows Defender` 处于打开的状态。大多数第三方的杀毒软件都可以识别并代替它。

查看或关闭 `Windows Defender` ，可以尝试以下方法：

* 启用或禁用 `Windows Defender` 的实时保护：  
    * 右键点击开始菜单，选择 `设置` 或按住 `WIN + I` 快捷键打开设置。  
    * 点击 `隐私和安全性` ，然后选择 `Windows 安全中心` 。  
    * 在 `保护区域` 下的 `病毒和威胁防护` 中，点击 `病毒和威胁保护设置` 。  
    * 关闭实时保护、云提供的保护、自动提交样本、篡改防护等选项。
* 通过注册表禁用 `Windows Defender` ：  
    * 使用快捷键“Win+R“打开运行框，然后输入 regedit.exe。  
    * 按照以下的顺序打开选项 `计算机-HKEY_LOCAL_MACHINE-SOFTWARE-Policies-Microsoft-Windows Defender` 。  
    * 在右边空白处点击右键，然后选择新建 `DWORD（32位）` 文件。然后重命名为 `DisableAntiSpyware` ，双击打开文件，然后将其数值改为 `1` 。  
  

### 4.3 杀毒软件推荐  
很多朋友购买新电脑的第一件事，恐怕就是安装各种管家和杀毒软件。相信这已经成为习惯了，那么新购买的新电脑，有必要安装杀毒软件吗？如果买来的电脑只是用来日常办公娱乐，工作内容也不会涉及到使用来路不明的网站或软件，那么可以不用装杀毒软件。不安装其他的杀毒软件的理由有两个：一个是Windows 10、Windows 11自带 `Windows Defender` ，二是良好的使用习惯很难中毒。很多朋友对这款软件的印象可能并不好，特别是在Windows 7时代，很多朋友都想方设法把它关掉。时至今日，Windows Defender的使用体验已经非常好了。当然最重要的还是杀毒性能。今年一二月份，AV-TEST进行了测试，其选取了多款针对Windows 10的杀毒软件，Windows Defender就在其中。18分满分，Windows Defender得了17.5分，其表现比部分笔记本预装的MaAfee、热门免费杀软Avast还好。  

很多人不喜欢Windows Defender的原因其实很简单，此前大家习惯下载盗版软件，比如破解游戏、破解工具等，这些软件很容易被Windows Defender视为病毒并查杀。正是这个原因，很多朋友选择将Windows Defender关闭。现如今使用盗版软件的用户越来越少，而且即使出现误杀，还是可以将文件恢复回来并加入信任名单。在易用性方面，Windows Defender也算是比较不错的，其不会无缘无故弹窗，而且不会有无关紧要的内容，比较本本分分，这比很多国内的杀毒软件强多了。以前为什么要装杀毒软件？以前大家电脑遇到问题后，很多都是靠重装解决。重装一次10块钱，花费不高，速度也快。其实很多维修店给大家重装的系统基本都是盗版系统，特别是一开机，里面已经预装了各种软件，甚至系统里面有没有留着后门也不知道。在那种情况下，杀毒软件非常必要。  

到了现在，买一台电脑基本都会预装正版系统，而且即使自己DIY，很多朋友也会选择使用官方工具安装系统，保证系统是纯净的。在这一大环境下，很多电脑在正常使用的时候很多会遇到病毒攻击的情况，而Windows 10中已经预装了Windows Defender。  

这些其实是良好的使用习惯带来的益处。除了重装系统，大家对于软件的态度也有了比较明显的转变。以往软件付费很难实行，特别是游戏，盗版资源一搜一大把。现如今大家版权意识越来越强，而且打击盗版的力度也明显更大了，很多网站已经不再提供盗版软件。这一观念的转变也降低了大家遇到病毒的几率。除了大环境的变化，个人的日常使用习惯也相当重要，只要大家不登录一些乱七八糟的网站，不点击来路不明的链接，不下载安装一些乱七八载的程序，基本上很难遇到病毒。而且有了Windows Defender的加持，即使偶尔遇到了病毒，也会被查杀出来。基于以上，新电脑不需要杀毒软件。  

[2024年Windows Defender还好使吗](https://zh.safetydetectives.com/blog/windows-defender%E5%AF%B9%E6%AF%94%E5%85%A8%E9%9D%A2%E9%98%B2%E7%97%85%E6%AF%92%E8%BD%AF%E4%BB%B6/)这篇文章对`Windows Defender` 以及其他杀毒软件的优缺点进行了较为详细的对比，仅作参考（内含广告）。想要了解更多信息也可以参考知乎回答：[Windows Defender 是否比火绒等安全软件更好](https://www.zhihu.com/question/510026987)。  